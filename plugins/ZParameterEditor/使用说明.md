# Z参数编辑器使用说明

## 插件概述

Z参数编辑器是一个Cura插件，提供可视化界面来定义随Z高度变化的参数，如温度配置文件和速度比例配置文件。

## 界面说明

### 1. 参数类型选择
- **温度按钮**: 编辑温度配置文件 (150-300°C)
- **速度按钮**: 编辑速度比例配置文件 (10-200%)

### 2. 模型信息区域
显示当前选中模型的基本信息：
- 模型高度 (mm)
- 层高 (mm)  
- 总层数

### 3. 图形编辑器
- **坐标轴**: 
  - 垂直轴：Z高度 (mm)
  - 水平轴：参数值 (°C 或 %)
- **蓝色圆点**: 参数控制点
- **交互**:
  - 点击图表空白处：在该位置添加参数点
  - 点击现有圆点：删除该参数点

### 4. 快速输入控件
- **高度输入框**: 精确输入Z高度值
- **数值输入框**: 精确输入参数值
- **添加按钮**: 使用输入框的值添加参数点
- **清除按钮**: 删除所有参数点

### 5. 参数点列表
显示所有已定义的参数点：
- 高度值 (mm)
- 参数值 (°C 或 %)
- 删除按钮 (×)

### 6. 应用按钮
将定义的参数配置文件应用到Cura设置中。

## 使用步骤

### 基本使用流程

1. **选择模型**: 在Cura中加载并选择要打印的模型
2. **打开工具**: 点击左侧工具栏中的Z参数编辑器图标
3. **选择参数类型**: 点击"温度"或"速度"按钮
4. **添加参数点**: 
   - 方法一：直接点击图表中的位置
   - 方法二：在输入框中输入精确值，然后点击"添加"
5. **调整参数**: 点击现有点可删除，重新添加可修改
6. **应用设置**: 点击"应用到设置"按钮

### 温度配置文件示例

假设要在打印过程中调整温度：
1. 选择"温度"模式
2. 添加参数点：
   - 0mm: 200°C (起始温度)
   - 10mm: 210°C (提高温度改善附着)
   - 20mm: 205°C (降低温度提高精度)
3. 应用设置

### 速度比例配置文件示例

假设要在不同高度调整打印速度：
1. 选择"速度"模式  
2. 添加参数点：
   - 0mm: 100% (正常速度)
   - 5mm: 80% (降低速度提高底层质量)
   - 15mm: 120% (提高速度加快打印)
3. 应用设置

## 注意事项

### 使用建议
- 参数点会按高度自动排序
- 相同高度的点会被新值替换
- 建议先在小模型上测试参数效果
- 可以随时清除重新设置

### 限制说明
- 需要选中模型才能获取正确的高度信息
- 参数值需要在合理范围内
- 应用设置后需要重新切片才能生效

### 故障排除
- 如果模型高度显示为0，请确保已选中模型
- 如果参数点无法添加，检查输入值是否在有效范围内
- 如果设置未生效，确保已点击"应用到设置"并重新切片

## 高级技巧

### 精确控制
- 使用输入框可以设置精确的数值
- 结合层高信息可以按层数设置参数

### 参数优化
- 温度配置：考虑材料特性和打印质量要求
- 速度配置：平衡打印质量和效率

### 批量操作
- 使用"清除"按钮快速重置所有参数
- 可以为不同模型保存不同的参数配置

## 技术支持

如有问题或建议，请参考：
- README.md: 详细功能说明
- 开发文档: doc/Z参数编辑器开发记录.md
- 测试脚本: test_plugin.py
